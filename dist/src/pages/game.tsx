import{jsx as e,jsxs as r}from"/-/esm.sh/react@18.1.0/jsx-runtime?v=181c93324c9";import{Head as R,useData as j,Link as v}from"/-/deno.land/x/aleph@1.0.0-alpha.71/framework/react/mod.ts?v=181c93324c9";import{useEffect as M,useState as p}from"/-/esm.sh/react@18.1.0?v=181c93324c9";import{Button as f}from"/src/components/button/index.tsx?v=181c93324c9";import{jsx as h,jsxs as C}from"/-/esm.sh/react@18.1.0/jsx-runtime?v=181c93324c9";function x(u,t){let{document:s}=globalThis;if(s){let o=Array.from(s.head.children).find(i=>i.getAttribute("data-module-id")===u&&i.hasAttribute("ssr"));if(o)o.removeAttribute("ssr");else{let i=Array.from(s.head.children).filter(c=>c.getAttribute("data-module-id")===u),a=s.createElement("style");a.setAttribute("data-module-id",u),a.appendChild(s.createTextNode(t)),s.head.appendChild(a),i.length>0&&i.forEach(c=>s.head.removeChild(c))}}}var q=globalThis.document&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);var T="*{--color-brack:#333;--color-dark-gray:#454545;--color-gray:#6e6e6e;--color-light-gray:#c3c3c3;--color-white:#fff}.overlay{width:100%;height:100%;background-color:rgba(0,0,0,.5);justify-content:center;align-items:center;display:flex;position:fixed;top:0;left:0}.body{z-index:2;width:30%;background-color:var(--color-white);border-radius:40px;padding:64px}.header{flex-direction:row;justify-content:space-between;align-items:center;display:flex}.title{font-family:AiShiroYukiguni_Free-Regular;font-size:40px}.close{cursor:pointer;justify-content:center;align-items:center;padding:12px;display:flex}.content{color:var(--color-dark-gray);padding-top:64px;font-size:18px;line-height:1.6}";x("./src/components/modal/style.css",T);var F=({show:u,setShow:t,title:s,content:o})=>{let i=()=>{t(!1)};return u?h("div",{className:"overlay",onClick:i,children:C("div",{className:"body",onClick:a=>a.stopPropagation(),children:[C("div",{className:"header",children:[h("div",{className:"title",children:s}),h("div",{className:"close",onClick:i,children:h("img",{src:"../../public/close.svg",width:"20",height:"20",title:"closeIcon"})})]}),h("div",{className:"content",children:o})]})}):null};import"/src/styles/game.css?module&v=181c93324c9";var $=u=>{let t="";return(t=u.slice(-1)==="\u30FC"?u.slice(-2).slice(0,1):u.slice(-1))==="\u3041"?"\u3042":t==="\u3043"?"\u3044":t==="\u3045"?"\u3046":t==="\u3047"?"\u3048":t==="\u3049"?"\u304A":t==="\u3063"?"\u3064":t==="\u3083"?"\u3084":t==="\u3085"?"\u3086":t==="\u3087"?"\u3088":t==="\u308E"?"\u308F":t},z=u=>Math.floor(Math.random()*u),y=["\u3057\u308A\u3068\u308A","\u3067\u3043\u30FC\u306E","\u3058\u3050","\u3081\u304C\u306D","\u3055\u3070\u3048"],A={words:[{id:0,message:y[z(y.length)]}]};JSON.parse(window.localStorage?.getItem("words")||JSON.stringify(A.words));var V=!0,W=()=>{let{data:{words:u},isMutating:t,mutation:s}=j(),[o,i]=p([]),[a,c]=p(!0),[S,g]=p(!1),[E,w]=p(!1);M(()=>{u.length>0&&i(u.map(l=>l.message).slice(-3))},[]);let B=()=>{g(!0),w(!0)},b=()=>{s.delete(void 0,"replace"),i(A.words.map(l=>l.message)),w(!1)};return r("div",{className:"screen game",children:[r(R,{children:[e("title",{children:"Game"}),e("meta",{name:"description",content:"\u3057\u308A\u3068\u308A\u3059\u308B"})]}),r("div",{className:"game-contents-container",children:[e("div",{className:"words-contents-container",children:u.length>0&&r("div",{className:"recent-words-container",children:[u.length>1&&r("div",{className:"container",children:[e("div",{className:"recent-words",children:o.map((l,d)=>r("p",{className:"recent-word",children:[u.length-o.length+d," ",l]}))}),e("div",{className:"timer",children:r("p",{className:"time",children:["\u3042\u3068",e("br",{}),e("span",{children:"10"}),"\u3073\u3087\u3046"]})})]}),r("p",{className:"most-recent-word",children:[u.length," ",e("span",{children:u.slice(-1)[0].message})]})]})}),r("div",{className:"operation-conatainer",children:[E===!1&&e("form",{onSubmit:async l=>{l.preventDefault();let d=l.currentTarget,N=new FormData(d),n=N.get("message")?.toString().trim(),k=(n??"").charAt(0),D=$(u.slice(-1)[0].message);return u.map(m=>m.message).includes(n??"")||/[ん]$/.test(n??"")?B():/[^ぁ-ん]ー/.test(n??"")?alert(`\u3072\u3089\u304C\u306A\u3092\u3064\u304B\u3063\u3066\u306D
`):k!==D?alert("\u307E\u3048\u306E\u3053\u3068\u3070\u306B\u3064\u306A\u304C\u3063\u3066\u306A\u3044\u3088"):((n??"").length<2&&alert("\u305D\u308C\u306F\u305A\u308B\u3044\u304B\u3089\u3084\u3081\u3066\u307B\u3057\u3044\u306A\u3041\u2026"),void(n&&(await s.put({message:n},{optimisticUpdate:m=>({words:[...m.words,{id:Date.now(),message:n}]}),replace:!0}),i(u.map(m=>m.message).slice(-3)),d.reset(),setTimeout(()=>{d.querySelector("input")?.focus()},0))))},children:e("input",{type:"text",name:"message",placeholder:"\u3064\u304E\u306E\u3053\u3068\u3070\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u306D",autoFocus:!0,autoComplete:"off",disabled:!!t})}),r("div",{className:"buttons",children:[e(f,{onClick:b,children:e(v,{role:"button",to:"/game",children:"\u306F\u3058\u3081\u304B\u3089"})}),e(f,{onClick:()=>c(!0),children:e("a",{children:"\u308B\u30FC\u308B"})})]})]})]}),e(F,{title:"\u308B\u30FC\u308B",content:e("div",{children:r("p",{children:["\u3072\u3089\u304C\u306A\u3057\u304B\u3064\u304B\u3063\u3066\u306F\u3044\u3051\u307E\u305B\u3093\uFF0E",e("br",{}),e("br",{}),"\u304D\u3054\u3046\u3084\u3053\u3082\u3058\u3067\u304A\u3063\u308F\u305F\u3089",e("br",{}),"\u201C\u3066\u304F\u306E\u308D\u3058\u30FC\u201D",e("br",{}),"\u201D\u3058\u3057\u3087\u201D",e("br",{}),"\u201D\u3088\u3046\u304B\u3093\u201D",e("br",{}),"\u306E\u3088\u3046\u306B\u3061\u3087\u304F\u305C\u3093\u306E\u3082\u3058\u3084",e("br",{}),"\u3053\u3082\u3058\u3092\u304A\u304A\u304D\u304F\u3057\u305F\u3082\u3058\u304B\u3089\u3064\u3065\u3051\u307E\u3057\u3087\u3046\uFF0E",e("br",{}),e("br",{}),"\u306A\u3093\u3068\u306A\u304F1\u3082\u3058\u306E\u3053\u3068\u3070\u306F",e("br",{}),"\u305A\u308B\u3044\u304D\u304C\u3059\u308B\u306E\u3067\u3055\u3051\u3066\u304F\u3060\u3055\u3044\uFF0E",e("br",{}),e("br",{}),"\u3064\u304E\u306E\u3053\u3068\u3070\u3092\u3053\u305F\u3048\u308B\u307E\u3067\u306E",e("br",{}),"\u305B\u3044\u3052\u3093\u3058\u304B\u3093\u306F",10,"\u3073\u3087\u3046\u3067\u3059\uFF0E",e("br",{}),e("br",{}),"\u304A\u306A\u3058\u3053\u3068\u3070\u306F1\u304B\u3044\u3060\u3051\uFF0E",e("br",{}),e("br",{}),"\u304C\u3093\u3070\u3063\u3066\u306D\uFF0E"]})}),show:a,setShow:c}),e(F,{title:"\u3052\u30FC\u3080\u304A\u30FC\u3070\u30FC",content:r("div",{children:[r("p",{children:[u.length,"\u305F\u3093\u3054\u3082\u3064\u3065\u3044\u305F\u3088!",e("br",{}),e("br",{}),"\u307E\u305F\u3042\u305D\u3093\u3067\u306D\uFF0E"]}),r("div",{className:"game-over-buttons",children:[e(f,{onClick:()=>{g(!1),b()},children:e("a",{children:"\u306F\u3058\u3081\u304B\u3089"})}),e(f,{onClick:b,children:e(v,{role:"button",to:"/",children:"\u3052\u30FC\u3080\u3068\u3063\u3077\u3078"})})]})]}),show:S,setShow:g})]})},X=W;export{W as Game,V as data,X as default};
