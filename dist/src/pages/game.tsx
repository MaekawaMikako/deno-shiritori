import{jsx as e,jsxs as r}from"/-/esm.sh/react@18.1.0/jsx-runtime?v=181ca529b76";import{Head as H,useData as J,Link as N}from"/-/deno.land/x/aleph@1.0.0-alpha.71/framework/react/mod.ts?v=181ca529b76";import{useCallback as D,useEffect as k,useRef as U,useState as c}from"/-/esm.sh/react@18.1.0?v=181ca529b76";import{Button as f}from"/src/components/button/index.tsx?v=181ca529b76";import{jsx as p,jsxs as B}from"/-/esm.sh/react@18.1.0/jsx-runtime?v=181ca529b76";function S(t,u){let{document:s}=globalThis;if(s){let a=Array.from(s.head.children).find(l=>l.getAttribute("data-module-id")===t&&l.hasAttribute("ssr"));if(a)a.removeAttribute("ssr");else{let l=Array.from(s.head.children).filter(d=>d.getAttribute("data-module-id")===t),i=s.createElement("style");i.setAttribute("data-module-id",t),i.appendChild(s.createTextNode(u)),s.head.appendChild(i),l.length>0&&l.forEach(d=>s.head.removeChild(d))}}}var _=globalThis.document&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);var O="*{--color-brack:#333;--color-dark-gray:#454545;--color-gray:#6e6e6e;--color-light-gray:#c3c3c3;--color-white:#fff}.overlay{width:100%;height:100%;background-color:rgba(0,0,0,.5);justify-content:center;align-items:center;display:flex;position:fixed;top:0;left:0}.body{z-index:2;width:30%;background-color:var(--color-white);border-radius:40px;padding:64px}.header{flex-direction:row;justify-content:space-between;align-items:center;display:flex}.title{font-family:AiShiroYukiguni_Free-Regular;font-size:40px}.close{cursor:pointer;justify-content:center;align-items:center;padding:12px;display:flex}.content{color:var(--color-dark-gray);padding-top:64px;font-size:18px;line-height:1.6}";S("./src/components/modal/style.css",O);var x=({show:t,setShow:u,title:s,content:a})=>{let l=()=>{u(!1)};return t?p("div",{className:"overlay",onClick:l,children:B("div",{className:"body",onClick:i=>i.stopPropagation(),children:[B("div",{className:"header",children:[p("div",{className:"title",children:s}),p("div",{className:"close",onClick:l,children:p("img",{src:"../../public/close.svg",width:"20",height:"20",title:"closeIcon"})})]}),p("div",{className:"content",children:a})]})}):null};import"/src/styles/game.css?module&v=181ca529b76";var L=t=>{let u="";return(u=t.slice(-1)==="\u30FC"?t.slice(-2).slice(0,1):t.slice(-1))==="\u3041"?"\u3042":u==="\u3043"?"\u3044":u==="\u3045"?"\u3046":u==="\u3047"?"\u3048":u==="\u3049"?"\u304A":u==="\u3063"?"\u3064":u==="\u3083"?"\u3084":u==="\u3085"?"\u3086":u==="\u3087"?"\u3088":u==="\u308E"?"\u308F":u},P=t=>Math.floor(Math.random()*t),T=["\u3057\u308A\u3068\u308A","\u3067\u3043\u30FC\u306E","\u3058\u3050","\u3081\u304C\u306D","\u3055\u3070\u3048"],R={words:[{id:0,message:T[P(T.length)]}]};JSON.parse(window.localStorage?.getItem("words")||JSON.stringify(R.words));var ie=!0,Y=()=>{let t=U(null),{data:{words:u},isMutating:s,mutation:a}=J(),[l,i]=c([]),[d,C]=c(!0),[j,g]=c(!1),[M,v]=c(!1),[b,y]=c(5),[F,z]=c(0);k(()=>{u.length>0&&i(u.map(n=>n.message).slice(-3))},[]),k(()=>{b===0&&E()},[b]);let I=D(()=>{t.current===null&&(t.current=setInterval(()=>{y(n=>n-1)},1e3))},[]),A=D(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]),$=()=>{y(5),I()},E=()=>{g(!0),v(!0),A()},w=()=>{a.delete(void 0,"replace"),i(R.words.map(n=>n.message)),v(!1),A(),F<u.length&&z(u.length)};return r("div",{className:"screen game",children:[r(H,{children:[e("title",{children:"Game"}),e("meta",{name:"description",content:"\u3057\u308A\u3068\u308A\u3059\u308B"})]}),r("div",{className:"game-contents-container",children:[e("div",{className:"words-contents-container",children:u.length>0&&r("div",{className:"recent-words-container",children:[u.length>1&&r("div",{className:"container",children:[e("div",{className:"recent-words",children:l.map((n,h)=>r("p",{className:"recent-word",children:[u.length-l.length+h," ",n]}))}),e("div",{className:"timer",children:r("p",{className:"time",children:["\u3042\u3068",e("br",{}),e("span",{children:b}),"\u3073\u3087\u3046"]})})]}),r("p",{className:"most-recent-word",children:[u.length," ",e("span",{children:u.slice(-1)[0].message})]})]})}),r("div",{className:"operation-conatainer",children:[M===!1&&e("form",{onSubmit:async n=>{n.preventDefault();let h=n.currentTarget,G=new FormData(h),o=G.get("message")?.toString().trim(),W=(o??"").charAt(0),q=L(u.slice(-1)[0].message);return u.map(m=>m.message).includes(o??"")||/[ん]$/.test(o??"")?E():/[^ぁ-んー]/.test(o??"")?alert(`\u3072\u3089\u304C\u306A\u3092\u3064\u304B\u3063\u3066\u306D
`):W!==q?alert("\u307E\u3048\u306E\u3053\u3068\u3070\u306B\u3064\u306A\u304C\u3063\u3066\u306A\u3044\u3088"):((o??"").length<2&&alert("\u305D\u308C\u306F\u305A\u308B\u3044\u304B\u3089\u3084\u3081\u3066\u307B\u3057\u3044\u306A\u3041\u2026"),void(o&&(await a.put({message:o},{optimisticUpdate:m=>({words:[...m.words,{id:Date.now(),message:o}]}),replace:!0}),i(u.map(m=>m.message).slice(-3)),$(),h.reset(),setTimeout(()=>{h.querySelector("input")?.focus()},0))))},children:e("input",{type:"text",name:"message",placeholder:"\u3064\u304E\u306E\u3053\u3068\u3070\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u306D",autoFocus:!0,autoComplete:"off",disabled:!!s})}),r("div",{className:"buttons",children:[e(f,{onClick:w,children:e(N,{role:"button",to:"/game",children:"\u306F\u3058\u3081\u304B\u3089"})}),e(f,{onClick:()=>C(!0),children:e("a",{children:"\u308B\u30FC\u308B"})})]})]})]}),e(x,{title:"\u308B\u30FC\u308B",content:e("div",{children:r("p",{children:["\u3072\u3089\u304C\u306A\u3057\u304B\u3064\u304B\u3063\u3066\u306F\u3044\u3051\u307E\u305B\u3093\uFF0E",e("br",{}),e("br",{}),"\u304D\u3054\u3046\u3084\u3053\u3082\u3058\u3067\u304A\u3063\u308F\u305F\u3089",e("br",{}),"\u201C\u3066\u304F\u306E\u308D\u3058\u30FC\u201D",e("br",{}),"\u201D\u3058\u3057\u3087\u201D",e("br",{}),"\u201D\u3088\u3046\u304B\u3093\u201D",e("br",{}),"\u306E\u3088\u3046\u306B\u3061\u3087\u304F\u305C\u3093\u306E\u3082\u3058\u3084",e("br",{}),"\u3053\u3082\u3058\u3092\u304A\u304A\u304D\u304F\u3057\u305F\u3082\u3058\u304B\u3089\u3064\u3065\u3051\u307E\u3057\u3087\u3046\uFF0E",e("br",{}),e("br",{}),"\u306A\u3093\u3068\u306A\u304F1\u3082\u3058\u306E\u3053\u3068\u3070\u306F",e("br",{}),"\u305A\u308B\u3044\u304D\u304C\u3059\u308B\u306E\u3067\u3055\u3051\u3066\u304F\u3060\u3055\u3044\uFF0E",e("br",{}),e("br",{}),"\u3064\u304E\u306E\u3053\u3068\u3070\u3092\u3053\u305F\u3048\u308B\u307E\u3067\u306E",e("br",{}),"\u305B\u3044\u3052\u3093\u3058\u304B\u3093\u306F",5,"\u3073\u3087\u3046\u3067\u3059\uFF0E",e("br",{}),e("br",{}),"\u304A\u306A\u3058\u3053\u3068\u3070\u306F1\u304B\u3044\u3060\u3051\uFF0E",e("br",{}),e("br",{}),"\u304C\u3093\u3070\u3063\u3066\u306D\uFF0E"]})}),show:d,setShow:C}),e(x,{title:"\u3052\u30FC\u3080\u304A\u30FC\u3070\u30FC",content:r("div",{children:[r("p",{children:[u.length,"\u304B\u3044\u3082\u3064\u3065\u3044\u305F\u3088!",e("br",{}),e("br",{}),"\u3044\u307E\u307E\u3067\u306E\u3055\u3044\u3053\u3046\u304D\u308D\u304F\u306F",F,"\u304B\u3044!",e("br",{}),e("br",{}),F<=u.length&&r("p",{children:["\u304A\u3081\u3067\u3068\u3046!",e("br",{}),e("br",{})]}),"\u307E\u305F\u3042\u305D\u3093\u3067\u306D\uFF0E"]}),r("div",{className:"game-over-buttons",children:[e(f,{onClick:()=>{g(!1),w()},children:e("a",{children:"\u306F\u3058\u3081\u304B\u3089"})}),e(f,{onClick:w,children:e(N,{role:"button",to:"/",children:"\u3052\u30FC\u3080\u3068\u3063\u3077\u3078"})})]})]}),show:j,setShow:g})]})},oe=Y;export{Y as Game,ie as data,oe as default};
